#!/bin/bash
# Run a test and verify the output

# Run the test command and collect the output and error streams
command=`basename $0`
echo "Running the test code...  $1"

expected=${1/test-/correct-}
output=${1/test-/output-}

$1  2>&1 | test-filter > $output

# Show unexpected results
diffs=`diff $output $expected`
if [ ! -z "$diffs" ] 
then
    echo 
    echo '------------------------------------------------------'
    echo "Verify expected output, ($output, $expected)"
    echo 
    echo 'Unexpected results:'
    echo '< Actual,    > Expected'
    diff  $output $expected
fi

