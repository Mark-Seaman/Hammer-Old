#!/bin/bash
# Create thumbnails for images in a directory

album=$1
title=$2

media=/home/seaman/Documents/Web/mybook/images
gallery=/home/seaman/Documents/MyBook/Gallery
image_dir=/home/seaman/Documents/Web/Images/$album

# Rename files from JPG to jpg
cd $image_dir
for f in *.JPG
do
   mv $f ${f/.JPG/.jpg}
done

# Create a link for the images in the gallery directory
mkdir -p $gallery/$album
mkdir -p $media/Gallery/$album
ln -sf $media $gallery/$album/images

# Find big files and make thumbnails
for f in *.jpg
do
    echo "create images for $f"
    convert -resize 200x200 $f t-$f
    convert -resize 800x800 $f f-$f
done

# Move the created images into the right place
mv ?-??.jpg $media/Gallery/$album
