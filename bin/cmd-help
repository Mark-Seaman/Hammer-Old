#!/usr/bin/python
# List commands for automation (ch)

from files  import list_files,read_file
from sys    import argv

dir = '/home/seaman/bin'
prefix='cmd-'

# Capture the directory
if len(argv) > 2: 
    dir=argv[2]

# Capture the prefix
if len(argv) > 1: 
    prefix=argv[1]

# Only work with commands
def is_command(f):
    return f.find('.pyc')==-1 and f.find('~')==-1 and prefix in f

# Print the name and description
def description(f):
    print "%-15s"%f, read_file(dir+'/'+f)[1]

# Print all names
map (description, 
     filter (is_command, 
             sorted(list_files(dir))))
