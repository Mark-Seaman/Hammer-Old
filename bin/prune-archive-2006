#!/bin/bash
# Remove old files from the archive and merge directories together

. /home/seaman/bin/bash-vars

# Make sure you are running from Archive
d=~/LiveSync/Archive

if [ ! -d "$d" ] 
then
    echo "Directory does not exist, $d"
    exit 1
fi


# If this directory exists then prune it
function merge_dir {
    if [ ! -d "$1" ] ; then return; fi
    if [ ! -d "$2" ] ; then mkdir -p "$2"; fi
    rsync -auv "$1/" "$2" && rm -rf "$1"
}


echo "Prune $d"
cd $d/2006

merge_dir Mark .
merge_dir Mail .
merge_dir Home .
merge_dir Download .
merge_dir Stacie/Stacie_laptop Stacie

rm -rf 'HP Digital Camera 927'
rm -rf Church/Sermons
rm -rf Mail/Other/Old
rm -rf Ghost
rm -rf MS*
