#!/usr/bin/env python
# Create a new document in the current directory

from os.path import exists
from sys import argv
from os import environ,system

def create_file(f,template):
    '''
    Create a file based on the template
    '''
    template=environ['br']+'/Template'+template
    if not exists(template):
        print 'no template', template
        exit(1)
    else:
        print 'template found', template
        open(f,'wt').write(open(template).read()%f)


def create_if_needed(f,template):
    '''
    Create a file if it is missing and the template is found
    '''
    print 'Create a new document',f, ' based on template',template
    if not exists(f):
        print 'no file', f
        create_file(f,template)
    else:
        print 'File already exists', f
    

create_if_needed(argv[1],argv[2])
system ('e '+argv[1])
