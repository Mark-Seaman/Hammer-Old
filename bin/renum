#!/bin/bash
# Rename all files in a directory tree sequentially

dir=$1
suffix=$2
num=$3


echo "Renumber files in $dir of type $2"
find $1 -type f -name "*.$suffix"| sort |
while read line 
do
    (( num++ ))
    d=`dirname $line`
    f=`basename $line`
    while [ -f "$d/$num.$suffix" ]
    do
        (( num++ ))
    done
    mv $d/$f $d/$num.$suffix
done

